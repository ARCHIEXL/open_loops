<section class="card">
  <div class="section-head">
    <h2 class="h2">Capture</h2>
    <span class="meta">Score optional</span>
  </div>

  <%= form_with model: @task, url: tasks_path, class: "form" do |f| %>
    <div class="form-row form-row--primary">
      <div>
        <%= f.label :title, "Loop", class: "label" %>
        <%= f.text_field :title, required: true, autofocus: true, class: "input", placeholder: "Add a loop…" %>
      </div>

      <%= f.submit "Capture", class: "btn btn--primary" %>
    </div>

    <div class="form-row form-row--scores">
      <div>
        <%= f.label :importance, "Importance", class: "label meta" %>
        <%= f.number_field :importance, in: 1..5, class: "input input--score" %>
      </div>

      <div>
        <%= f.label :urgency, "Urgency", class: "label meta" %>
        <%= f.number_field :urgency, in: 1..5, class: "input input--score" %>
      </div>

      <div>
        <%= f.label :effort, "Effort", class: "label meta" %>
        <%= f.number_field :effort, in: 1..5, class: "input input--score" %>
      </div>
    </div>
  <% end %>
</section>

<div class="grid">
  <section class="card">
    <div class="section-head">
      <h3 class="h3">Unscored</h3>
      <span class="count"><%= @unscored.count %></span>
    </div>
    <%= render partial: "table", locals: { tasks: @unscored } %>
  </section>

  <section class="card">
    <div class="section-head">
      <h3 class="h3">Quick Wins</h3>
      <span class="count"><%= @quick_wins.count %></span>
    </div>
    <p class="meta">E ≤ 2</p>
    <div style="margin-top: var(--space-2);">
      <%= render partial: "table", locals: { tasks: @quick_wins } %>
    </div>
  </section>

  <section class="card">
    <div class="section-head">
      <h3 class="h3">Later</h3>
      <span class="count"><%= @later.count %></span>
    </div>
    <p class="meta">I ≤ 3 and U ≤ 3</p>
    <div style="margin-top: var(--space-2);">
      <%= render partial: "table", locals: { tasks: @later } %>
    </div>
  </section>

  <section class="card">
    <div class="section-head">
      <h3 class="h3">Active Projects</h3>
      <span class="count"><%= @active_projects.count %></span>
    </div>
    <%= render partial: "table", locals: { tasks: @active_projects } %>
  </section>

  <section class="card" style="grid-column: 1 / -1;">
    <div class="section-head">
      <h3 class="h3">Completed</h3>
      <span class="count"><%= @completed.count %></span>
    </div>
    <%= render partial: "table", locals: { tasks: @completed } %>
  </section>
</div>
