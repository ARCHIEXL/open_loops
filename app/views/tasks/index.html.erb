<section class="card">
  <div class="section-head">
    <h2 class="h2">Capture</h2>
    <span class="meta">Score optional</span>
  </div>

  <%= form_with model: @task, url: tasks_path, class: "form" do |f| %>
    <div class="form-row form-row--primary">
      <div>
        <%= f.label :title, "Loop", class: "label" %>
        <%= f.text_field :title,
                         required: true,
                         autofocus: true,
                         class: "input",
                         placeholder: "Add a loop…" %>
      </div>

      <%= f.submit "Capture", class: "btn btn--primary" %>
    </div>

    <details class="score-details">
      <summary class="score-summary meta">Score (optional)</summary>

      <div class="form-row form-row--scores score-block">
        <div class="score-field">
          <div class="label meta">Importance</div>
          <div class="score-picker" role="radiogroup" aria-label="Importance">
            <%= f.collection_radio_buttons :importance, (1..5).to_a, :to_s, :to_s do |b| %>
              <%= b.radio_button(class: "score-input") %>
              <%= b.label(class: "score-chip") { b.text } %>
            <% end %>
          </div>
        </div>

        <div class="score-field">
          <div class="label meta">Urgency</div>
          <div class="score-picker" role="radiogroup" aria-label="Urgency">
            <%= f.collection_radio_buttons :urgency, (1..5).to_a, :to_s, :to_s do |b| %>
              <%= b.radio_button(class: "score-input") %>
              <%= b.label(class: "score-chip") { b.text } %>
            <% end %>
          </div>
        </div>

        <div class="score-field">
          <div class="label meta">Effort</div>
          <div class="score-picker" role="radiogroup" aria-label="Effort">
            <%= f.collection_radio_buttons :effort, (1..5).to_a, :to_s, :to_s do |b| %>
              <%= b.radio_button(class: "score-input") %>
              <%= b.label(class: "score-chip") { b.text } %>
            <% end %>
          </div>
        </div>
      </div>
    </details>
  <% end %>
</section>

<div class="grid">
  <section class="card">
    <div class="section-head">
      <h3 class="h3">Quick Wins</h3>
      <span class="count"><%= @quick_wins.count %></span>
    </div>
    <p class="meta">E ≤ 2</p>
    <div style="margin-top: var(--space-2);">
      <%= render partial: "table", locals: { tasks: @quick_wins } %>
    </div>
  </section>

  <section class="card">
    <div class="section-head">
      <h3 class="h3">Active</h3>
      <span class="count"><%= @active_projects.count %></span>
    </div>
    <p class="meta">Everything else scored</p>
    <div style="margin-top: var(--space-2);">
      <%= render partial: "table", locals: { tasks: @active_projects } %>
    </div>
  </section>
</div>
